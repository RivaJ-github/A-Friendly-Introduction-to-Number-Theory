\documentclass[openany]{ctexbook}
\usepackage{geometry}
\geometry{
  a4paper,         % 使用 A4 纸张大小
  margin=2.5cm     % 设置页边距为 2.5 厘米
}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{diagbox}
\usepackage[table]{xcolor} % 加载 xcolor 包，并启用 table 选项

% define exercise
\newcounter{exercise}
\counterwithin{exercise}{chapter}
\def\exercise{\vskip 2ex\stepcounter{exercise}{\bf \theexercise}\quad\relax}

% define proof
\newcounter{theoremno}
\counterwithin{theoremno}{chapter}
\def\proof{{\bf 证明：}\quad\relax}
\newenvironment{theorem}[1][]{% 定义 theorem 环境
    \stepcounter{theoremno}% 增加计数器
    {
        \bf 定理\thetheoremno%
        \if\relax\detokenize{#1}\relax% 检查是否有可选参数
        \else%
            \ (#1)% 输出可选参数
        \fi%
        \quad\ignorespaces% 开始新段落并忽略后续空格
    }
    \itshape
}{%
    \par% 结束环境前换行
}

% no indent
\setlength{\parindent}{0pt}

\begin{document}
\input chapter1.tex
\input chapter2.tex
\input chapter3.tex
\end{document}